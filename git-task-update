#!/bin/bash

set -e
source "${0%[\\/]*}"/_git-common.sh

curtask=$1
if [ "" == "$1" ]; then
	curtask=$(git rev-parse --abbrev-ref HEAD)

	if [ "master" == $curtask ]; then
		echo "Specify a task name to update"
		exit 1
	fi
fi

git task-sync

if [[ $curtask == task-* ]]; then
	task=${curtask:5}
fi

remote=$(git config "branch.master.remote")
git checkout task-$task
git merge $remote/master
